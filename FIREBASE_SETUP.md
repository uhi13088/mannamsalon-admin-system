# ğŸ”¥ Firebase ì„¤ì • ê°€ì´ë“œ

ë§›ë‚¨ì‚´ë¡± ê·¼ë¬´ê´€ë¦¬ ì‹œìŠ¤í…œì„ Firebaseì™€ ì—°ë™í•˜ê¸° ìœ„í•œ ì„¤ì • ê°€ì´ë“œì…ë‹ˆë‹¤.

---

## ğŸ“‹ ëª©ì°¨

1. [Firebase í”„ë¡œì íŠ¸ ìƒì„±](#1-firebase-í”„ë¡œì íŠ¸-ìƒì„±)
2. [Authentication ì„¤ì •](#2-authentication-ì„¤ì •)
3. [Firestore Database ì„¤ì •](#3-firestore-database-ì„¤ì •)
4. [Storage ì„¤ì •](#4-storage-ì„¤ì •)
5. [ì›¹ ì•± ë“±ë¡ ë° SDK ì„¤ì •](#5-ì›¹-ì•±-ë“±ë¡-ë°-sdk-ì„¤ì •)
6. [ë³´ì•ˆ ê·œì¹™ ì„¤ì •](#6-ë³´ì•ˆ-ê·œì¹™-ì„¤ì •)

---

## 1. Firebase í”„ë¡œì íŠ¸ ìƒì„±

### 1-1. Firebase Console ì ‘ì†
1. https://console.firebase.google.com/ ì ‘ì†
2. Google ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸
3. **"í”„ë¡œì íŠ¸ ì¶”ê°€"** ë²„íŠ¼ í´ë¦­

### 1-2. í”„ë¡œì íŠ¸ ìƒì„±
1. **í”„ë¡œì íŠ¸ ì´ë¦„**: `matnam-salon-work-system` (ë˜ëŠ” ì›í•˜ëŠ” ì´ë¦„)
2. **Google ì• ë„ë¦¬í‹±ìŠ¤**: ì„ íƒì‚¬í•­ (ë‚˜ì¤‘ì— í™œì„±í™” ê°€ëŠ¥)
3. **í”„ë¡œì íŠ¸ ë§Œë“¤ê¸°** í´ë¦­

---

## 2. Authentication ì„¤ì •

### 2-1. Authentication í™œì„±í™”
1. ì¢Œì¸¡ ë©”ë‰´ì—ì„œ **"Authentication"** í´ë¦­
2. **"ì‹œì‘í•˜ê¸°"** ë²„íŠ¼ í´ë¦­

### 2-2. ë¡œê·¸ì¸ ë°©ë²• ì„¤ì •
1. **"Sign-in method"** íƒ­ í´ë¦­
2. **"ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸"** ì„ íƒ
3. **"ì‚¬ìš© ì„¤ì •"** í† ê¸€ ON
4. **"ì €ì¥"** í´ë¦­

### 2-3. ìŠ¹ì¸ëœ ë„ë©”ì¸ ì¶”ê°€ (ë°°í¬ í›„)
1. **"Settings"** íƒ­ í´ë¦­
2. **"ìŠ¹ì¸ëœ ë„ë©”ì¸"** ì„¹ì…˜
3. ë°°í¬ URL ì¶”ê°€ (ì˜ˆ: `your-domain.com`)

---

## 3. Firestore Database ì„¤ì •

### 3-1. Firestore ìƒì„±
1. ì¢Œì¸¡ ë©”ë‰´ì—ì„œ **"Firestore Database"** í´ë¦­
2. **"ë°ì´í„°ë² ì´ìŠ¤ ë§Œë“¤ê¸°"** ë²„íŠ¼ í´ë¦­

### 3-2. ë³´ì•ˆ ê·œì¹™ ì„ íƒ
- **í…ŒìŠ¤íŠ¸ ëª¨ë“œë¡œ ì‹œì‘** (ê°œë°œ ì¤‘)
  - 30ì¼ ë™ì•ˆ ì½ê¸°/ì“°ê¸° í—ˆìš©
  - âš ï¸ í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” ë°˜ë“œì‹œ ë³´ì•ˆ ê·œì¹™ ìˆ˜ì • í•„ìš”!

### 3-3. ìœ„ì¹˜ ì„ íƒ
- **asia-northeast3 (ì„œìš¸)** ê¶Œì¥
- ë˜ëŠ” **asia-northeast1 (ë„ì¿„)**

---

## 4. Storage ì„¤ì •

### 4-1. Storage í™œì„±í™”
1. ì¢Œì¸¡ ë©”ë‰´ì—ì„œ **"Storage"** í´ë¦­
2. **"ì‹œì‘í•˜ê¸°"** ë²„íŠ¼ í´ë¦­

### 4-2. ë³´ì•ˆ ê·œì¹™ ì„ íƒ
- **í…ŒìŠ¤íŠ¸ ëª¨ë“œë¡œ ì‹œì‘** (ê°œë°œ ì¤‘)

### 4-3. ìœ„ì¹˜ ì„ íƒ
- Firestoreì™€ ë™ì¼í•œ ìœ„ì¹˜ ì„ íƒ (ì„œìš¸ ê¶Œì¥)

---

## 5. ì›¹ ì•± ë“±ë¡ ë° SDK ì„¤ì •

### 5-1. ì›¹ ì•± ì¶”ê°€
1. í”„ë¡œì íŠ¸ ê°œìš” í˜ì´ì§€ì—ì„œ **ì›¹ ì•„ì´ì½˜ (</>)** í´ë¦­
2. **ì•± ë‹‰ë„¤ì„**: `ë§›ë‚¨ì‚´ë¡± ê·¼ë¬´ê´€ë¦¬` (ë˜ëŠ” ì›í•˜ëŠ” ì´ë¦„)
3. **Firebase Hosting ì„¤ì •**: ì„ íƒì‚¬í•­ (ë‚˜ì¤‘ì— ì„¤ì • ê°€ëŠ¥)
4. **ì•± ë“±ë¡** í´ë¦­

### 5-2. Firebase SDK êµ¬ì„± ë³µì‚¬
ì•„ë˜ì™€ ê°™ì€ ì„¤ì • ì½”ë“œê°€ í‘œì‹œë©ë‹ˆë‹¤:

```javascript
// Firebase SDK êµ¬ì„± (ì˜ˆì‹œ)
const firebaseConfig = {
  apiKey: "AIzaSy...",
  authDomain: "matnam-salon-xxx.firebaseapp.com",
  projectId: "matnam-salon-xxx",
  storageBucket: "matnam-salon-xxx.appspot.com",
  messagingSenderId: "123456789",
  appId: "1:123456789:web:abcdef"
};
```

### 5-3. í”„ë¡œì íŠ¸ì— ì ìš©
1. **`js/firebase-config.js`** íŒŒì¼ì„ ìƒì„± ë˜ëŠ” ìˆ˜ì •
2. ìœ„ ì„¤ì • ì½”ë“œë¥¼ ë³µì‚¬í•˜ì—¬ ë¶™ì—¬ë„£ê¸°
3. Firebase SDK ì´ˆê¸°í™” ì½”ë“œ ì¶”ê°€

---

## 6. ë³´ì•ˆ ê·œì¹™ ì„¤ì •

### 6-1. Firestore ë³´ì•ˆ ê·œì¹™

**ê°œë°œ ì¤‘ (í…ŒìŠ¤íŠ¸ ëª¨ë“œ):**
```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      allow read, write: if request.time < timestamp.date(2025, 3, 1);
    }
  }
}
```

**í”„ë¡œë•ì…˜ (ê¶Œì¥ ê·œì¹™):**
```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    
    // ì‚¬ìš©ì ë¬¸ì„œ
    match /users/{userId} {
      // ë³¸ì¸ ë°ì´í„°ëŠ” ì½ê¸° ê°€ëŠ¥
      allow read: if request.auth != null && request.auth.uid == userId;
      // ë³¸ì¸ ë°ì´í„° ìˆ˜ì • ê°€ëŠ¥ (ë‹¨, role ë³€ê²½ ë¶ˆê°€)
      allow update: if request.auth != null 
                    && request.auth.uid == userId 
                    && request.resource.data.role == resource.data.role;
      // ê´€ë¦¬ìëŠ” ëª¨ë“  ì‚¬ìš©ì ë°ì´í„° ì½ê¸°/ì“°ê¸° ê°€ëŠ¥
      allow read, write: if request.auth != null 
                         && get(/databases/$(database)/documents/users/$(request.auth.uid)).data.role == 'admin';
    }
    
    // ê³„ì•½ì„œ
    match /contracts/{contractId} {
      // ë³¸ì¸ ê³„ì•½ì„œ ì½ê¸°
      allow read: if request.auth != null 
                  && resource.data.employeeId == request.auth.uid;
      // ê´€ë¦¬ìë§Œ ì‘ì„±/ìˆ˜ì •/ì‚­ì œ
      allow create, update, delete: if request.auth != null 
                                    && get(/databases/$(database)/documents/users/$(request.auth.uid)).data.role in ['admin', 'manager', 'store_manager'];
    }
    
    // ê·¼íƒœ ê¸°ë¡
    match /attendance/{attendanceId} {
      // ë³¸ì¸ ê·¼íƒœ ì½ê¸°/ì‘ì„±
      allow read, create: if request.auth != null 
                          && request.resource.data.employeeId == request.auth.uid;
      // ê´€ë¦¬ìëŠ” ëª¨ë“  ê·¼íƒœ ì½ê¸°/ìˆ˜ì •
      allow read, update: if request.auth != null 
                          && get(/databases/$(database)/documents/users/$(request.auth.uid)).data.role in ['admin', 'manager', 'store_manager'];
    }
    
    // ê°€ì… ìŠ¹ì¸ ëŒ€ê¸°
    match /pending_users/{userId} {
      // ê´€ë¦¬ìë§Œ ì½ê¸°/ì“°ê¸°
      allow read, write: if request.auth != null 
                         && get(/databases/$(database)/documents/users/$(request.auth.uid)).data.role in ['admin', 'manager', 'store_manager'];
    }
  }
}
```

### 6-2. Storage ë³´ì•ˆ ê·œì¹™

```javascript
rules_version = '2';
service firebase.storage {
  match /b/{bucket}/o {
    // ì§ì› ì„œë¥˜ (í†µì¥ì‚¬ë³¸, ë³´ê±´ì¦)
    match /employee_docs/{userId}/{fileName} {
      // ë³¸ì¸ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥
      allow write: if request.auth != null && request.auth.uid == userId;
      // ë³¸ì¸ê³¼ ê´€ë¦¬ìë§Œ ì½ê¸° ê°€ëŠ¥
      allow read: if request.auth != null && 
                  (request.auth.uid == userId || 
                   firestore.get(/databases/(default)/documents/users/$(request.auth.uid)).data.role in ['admin', 'manager', 'store_manager']);
    }
    
    // ê³„ì•½ì„œ ì„œëª…
    match /signatures/{contractId}/{fileName} {
      // ì¸ì¦ëœ ì‚¬ìš©ìë§Œ ì—…ë¡œë“œ
      allow write: if request.auth != null;
      // ê´€ë ¨ëœ ì‚¬ëŒë§Œ ì½ê¸° ê°€ëŠ¥
      allow read: if request.auth != null;
    }
  }
}
```

---

## 7. ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] Firebase í”„ë¡œì íŠ¸ ìƒì„± ì™„ë£Œ
- [ ] Authentication (ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸) í™œì„±í™”
- [ ] Firestore Database ìƒì„± (ìœ„ì¹˜: ì„œìš¸)
- [ ] Storage í™œì„±í™”
- [ ] ì›¹ ì•± ë“±ë¡ ì™„ë£Œ
- [ ] Firebase SDK êµ¬ì„± ì •ë³´ ë³µì‚¬
- [ ] `js/firebase-config.js` íŒŒì¼ì— ì„¤ì • ì •ë³´ ì…ë ¥
- [ ] Firestore ë³´ì•ˆ ê·œì¹™ ì„¤ì •
- [ ] Storage ë³´ì•ˆ ê·œì¹™ ì„¤ì •

---

## 8. ë‹¤ìŒ ë‹¨ê³„

Firebase ì„¤ì •ì´ ì™„ë£Œë˜ë©´:

1. **íšŒì›ê°€ì…/ë¡œê·¸ì¸ í˜ì´ì§€ ê°œë°œ**
   - signup-employee.html (ì§ì›ìš©)
   - signup-admin.html (ê´€ë¦¬ììš©)
   - login.html (í†µí•© ë¡œê·¸ì¸)

2. **ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜**
   - localStorage â†’ Firestore
   - ê¸°ì¡´ ë”ë¯¸ ë°ì´í„° ì—…ë¡œë“œ

3. **ê¸°ëŠ¥ í†µí•©**
   - ëª¨ë“  CRUD ì‘ì—…ì„ Firestore APIë¡œ ë³€ê²½
   - ì‹¤ì‹œê°„ ë™ê¸°í™” ê¸°ëŠ¥ ì¶”ê°€

---

## ğŸ“ ë¬¸ì œ ë°œìƒ ì‹œ

- Firebase ê³µì‹ ë¬¸ì„œ: https://firebase.google.com/docs
- Firebase Console: https://console.firebase.google.com/
- ì„¤ì • ê´€ë ¨ ë¬¸ì˜: í”„ë¡œì íŠ¸ ë‹´ë‹¹ìì—ê²Œ ì—°ë½

---

**ì‘ì„±ì¼**: 2025-01-29  
**ì‘ì„±ì**: ë§›ë‚¨ì‚´ë¡± ê·¼ë¬´ê´€ë¦¬ ì‹œìŠ¤í…œ ê°œë°œíŒ€
